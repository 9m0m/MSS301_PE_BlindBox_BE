# Server Configuration
server.port=8080
spring.application.name=APIGateway_SE184531

spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration

springdoc.swagger-ui.enabled=false
springdoc.api-docs.enabled=false

jwt.secret=BlindBoxPE2025SecretKeyForJWTTokenGenerationMSS301Summer25Practice

spring.cloud.gateway.routes[0].id=msaccount-service
spring.cloud.gateway.routes[0].uri=http://localhost:8081
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/auth/**

spring.cloud.gateway.routes[1].id=msbrand-service
spring.cloud.gateway.routes[1].uri=http://localhost:8083
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/brands/**

spring.cloud.gateway.routes[2].id=msblindbox-service
spring.cloud.gateway.routes[2].uri=http://localhost:8082
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/blindboxes/**,/api/categories/**

spring.cloud.gateway.routes[3].id=msbrand-internal
spring.cloud.gateway.routes[3].uri=http://localhost:8083
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/internal/blindboxes/**

# Swagger UI Route - proxy to MSAccount which hosts aggregated UI
spring.cloud.gateway.routes[4].id=swagger-ui
spring.cloud.gateway.routes[4].uri=http://localhost:8081
spring.cloud.gateway.routes[4].predicates[0]=Path=/swagger-ui.html,/swagger-ui/**,/swagger-resources/**,/webjars/**,/v3/api-docs/swagger-config

# API Docs Routes - with sub-paths
spring.cloud.gateway.routes[5].id=msaccount-api-docs
spring.cloud.gateway.routes[5].uri=http://localhost:8081
spring.cloud.gateway.routes[5].predicates[0]=Path=/api-docs/msaccount,/api-docs/msaccount/**
spring.cloud.gateway.routes[5].filters[0]=RewritePath=/api-docs/msaccount(?<remaining>/?.*),/v3/api-docs$\{remaining}

spring.cloud.gateway.routes[6].id=msblindbox-api-docs
spring.cloud.gateway.routes[6].uri=http://localhost:8082
spring.cloud.gateway.routes[6].predicates[0]=Path=/api-docs/msblindbox,/api-docs/msblindbox/**
spring.cloud.gateway.routes[6].filters[0]=RewritePath=/api-docs/msblindbox(?<remaining>/?.*),/v3/api-docs$\{remaining}

spring.cloud.gateway.routes[7].id=msbrand-api-docs
spring.cloud.gateway.routes[7].uri=http://localhost:8083
spring.cloud.gateway.routes[7].predicates[0]=Path=/api-docs/msbrand,/api-docs/msbrand/**
spring.cloud.gateway.routes[7].filters[0]=RewritePath=/api-docs/msbrand(?<remaining>/?.*),/v3/api-docs$\{remaining}

# exact-base rewrites to avoid trailing-slash issues
spring.cloud.gateway.routes[8].id=docs-placeholder-cleanup
spring.cloud.gateway.routes[8].uri=http://localhost:8081
spring.cloud.gateway.routes[8].predicates[0]=Path=/__remove_if_exists__

logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.com.mss301=DEBUG

server.max-http-request-header-size=16KB



